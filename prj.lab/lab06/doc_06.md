# Введение
Данный проект реализует детектор объектов с использованием преобразования Хафа для детекции окружностей на изображении. Также проводится анализ результатов методом FROC (Free Response Operating Characteristic). В отчете описаны использованные функции, типы данных и алгоритмы для выполнения задачи. Результаты сравниваются с предыдущими методами бинаризации и простого детектирования объектов.

# Основные этапы

1. Загрузка изображения
Код загружает изображение с заданного пути.
Проверяется, удалось ли загрузить изображение, если нет, программа завершает работу с ошибкой.

2. Обнаружение кругов
Функция detectCirclesHough конвертирует изображение в градации серого.
Применяется размытие Гаусса для уменьшения шума.
Используется метод Хафа для обнаружения кругов на изображении. Результаты записываются в вектор структур Circle, каждая из которых содержит координаты и радиус круга.
Возвращается обработанное изображение в градациях серого.

3. Рисование кругов
Функция drawCircles рисует обнаруженные круги на оригинальном изображении. Круги отображаются красным цветом.

4. Расчет IoU (Intersection over Union)
Функция calculateIoU вычисляет коэффициент пересечения над объединением для двух кругов.
Рассчитывается площадь пересечения двух кругов и делится на площадь их объединения.
Возвращается значение IoU.

5. Оценка FROC
Функция computeFROC оценивает производительность алгоритма обнаружения кругов.
Вычисляются истинные положительные (TP), ложные положительные (FP) и ложные отрицательные (FN):
Для каждого круга из ground truth (истинные значения) проверяется, соответствует ли он обнаруженному кругу (detected).
Если IoU больше или равен порогу (например, 0.5), круг считается правильно обнаруженным (TP).
Если не найдено соответствий, увеличивается счетчик FN.
Все необнаруженные круги из списка detected считаются ложными положительными (FP).
Вычисляются чувствительность (sensitivity) и среднее количество ложных положительных на изображение (Avg FP per image).

6. Вывод результатов
Выводятся на экран значения TP, FP, FN.
Вычисляется и выводится чувствительность, как отношение TP к сумме TP и FN.
Вычисляется и выводится среднее количество ложных положительных на изображение.

Функция computeFROC проводит анализ FROC для оценки результатов детекции.
- True Positives (TP): число правильно детектированных окружностей.
- False Positives (FP): число ложноположительных детекций.
- False Negatives (FN): число пропущенных окружностей.
- Sensitivity: чувствительность, которая рассчитывается как TP / (TP + FN).
- Avg FP per Image: среднее число ложноположительных детекций на изображение.

8. Отображение результатов
Обработанное изображение и изображение с нарисованными кругами отображаются на экране.
Изображение с нарисованными кругами сохраняется по заданному пути.
Программа ожидает нажатия клавиши для завершения работы.

# Сравнение с методами из 4 лр
-	Высокая точность детекции окружностей 
-	Возможность настройки параметров преобразования Хафа для улучшения результатов.
-	Более высокая вычислительная сложность по сравнению с методами бинаризации из 4 лр
-	Зависимость от качества входного изображения и уровня шума.

# Результат:

<picture>
  <img src="../../pictures/lab04_test2.png" width="550" height="550">
</picture>
   
Рис. 1 – тестовое изображение

<picture>
  <img src="../../pictures/lab06_detect1.png" width="550" height="550">
</picture>
   
Рис. 2 – Детектированные изображения с HoughCircles(gray, circles, cv::HOUGH_GRADIENT, 1, gray.rows / 16, 30, 10, 5, 10);
   
<picture>
  <img src="../../pictures/lab06_detect2.png" width="550" height="550">
</picture>
   
Рис. 3 – Детектированные изображения с HoughCircles(gray, circles, cv::HOUGH_GRADIENT, 1, gray.rows / 16, 80, 10, 5, 10);

# Оценке качества

|Number of detection|True Positives|False Positives|False Negatives|Sensitivity|Average IoU|
|-|-|--------|---|-|-|
|1|100|0|0|1|0|
|2|88|0|12|1|0|

# Заключение
Детектор окружностей с использованием преобразования Хафа и анализ FROC показали хорошие результаты в задачах детекции объектов. По сравнению с методами бинаризации и простого детектирования, преобразование Хафа более точно определяет окружности, что подтверждается высокими показателями чувствительности и низким числом ложноположительных детекций.
